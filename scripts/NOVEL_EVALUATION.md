# 📚 小说创作自我评估系统

> 通过顶级视角审视 AI 生成的小说，发现问题，持续进化

---

## 🎯 功能概述

这个系统可以：
1. **读取完整的小说创作内容**（从 `result/export.md`）
2. **使用顶级编辑视角进行全面评估**（创意、人物、世界观、结构、文字）
3. **生成详细的评估报告**（包含评分、问题列表、改进建议）
4. **提取问题并生成改进计划**（针对提示词和流程）

---

## 🚀 快速开始

### 1. 运行评估

```bash
# 使用 Qwen 进行评估（推荐，长文本能力强）
python scripts/evaluate_novel.py --provider qwen

# 使用 Doubao 进行评估（文学创作能力强）
python scripts/evaluate_novel.py --provider doubao

# 指定小说文件
python scripts/evaluate_novel.py --novel result/export.md --provider qwen
```

### 2. 查看评估报告

评估报告保存在 `result/evaluations/` 目录下，文件名格式为 `evaluation_YYYYMMDD_HHMMSS.md`

报告包含：
- 📊 总体评分（5个维度）
- 🔴 致命问题（必须修复）
- 🟡 次要问题（建议修复）
- ✨ 优化建议（锦上添花）
- 🔧 提示词改进建议

### 3. 生成改进计划

```bash
python scripts/optimize_prompts.py result/evaluations/<最新的评估报告文件>
```

改进计划保存在 `result/improvement_plan.json`，包含：
- 需要修复的关键问题
- 提示词优化方向
- 流程改进建议

---

## 📋 评估维度

| 维度 | 评估内容 |
|------|---------|
| **核心创意** | 新颖度、冲突强度、情感钩子、独特卖点 |
| **人物塑造** | 立体度、动机可信度、小传真实感、对话符合度 |
| **世界观设定** | 逻辑支撑、自洽性、服务于故事、科学准确性 |
| **叙事结构** | 三幕结构、节奏、悬念、高潮满意度 |
| **文字质量** | 风格统一、具象生动、避免陈词滥调、情感真实 |

---

## 🔄 持续进化流程

```
创作小说 → 放入 result/export.md
    ↓
运行评估脚本 → 生成评估报告
    ↓
提取问题 → 生成改进计划
    ↓
根据建议 → 优化提示词和流程
    ↓
创作新版本 → 再次评估
    ↓
对比评分 → 验证改进效果
```

---

## 💡 评估提示词设计思路

评估提示词 (`scripts/novel_evaluator_prompt.md`) 采用以下策略：

1. **角色定位**：顶级小说创作顾问 + 20年科幻编辑经验
2. **评估框架**：6个维度全覆盖
3. **问题分级**：致命/次要/优化
4. **输出规范**：结构化 Markdown 格式
5. **改进导向**：不仅指出问题，还提供具体改进建议

---

## 🛠️ 技术细节

- **LLM 选择**：Qwen (长文本) / Doubao (文学创作)
- **Temperature**: 0.3 (降低随机性，获得稳定评估)
- **Max Tokens**: 8000 (允许详细报告)
- **超时时间**: 300 秒 (完整评估需要时间)

---

## 📁 文件结构

```
scripts/
├── evaluate_novel.py          # 评估脚本
├── optimize_prompts.py         # 改进计划生成器
└── novel_evaluator_prompt.md  # 评估提示词模板

result/
├── export.md                   # 小说内容
├── evaluations/                # 评估报告目录
│   └── evaluation_*.md
└── improvement_plan.json       # 改进计划
```

---

## 🎨 使用建议

### 评估时机
1. **每完成一个完整故事**：进行一次全面评估
2. **修改提示词后**：用同一个故事验证改进效果
3. **版本对比**：跟踪评分变化，验证进化方向

### 改进优先级
1. **先修复致命问题**：这些会严重影响可读性
2. **再优化次要问题**：提升整体体验
3. **最后锦上添花**：追求卓越

### 长期策略
- 建立评估历史记录
- 追踪评分趋势
- 积累常见问题模式
- 形成提示词优化最佳实践

---

## 🌟 未来扩展

可能的改进方向：
1. [ ] 自动应用提示词优化
2. [ ] 对比不同版本评分
3. [ ] 生成可视化评估报告
4. [ ] 建立问题知识库
5. [ ] 集成到创作流程中

---

**开始进化你的小说创作能力吧！** 🚀
