# 前端 UI 设计规范

> Creative AutoGPT 前端界面设计详细规范

## 1. 设计系统 (Design System)

### 1.1 颜色规范

```scss
// 主色调
$primary-color: #6366F1;        // 主色 - 靛蓝色
$primary-hover: #4F46E5;        // 主色悬停
$primary-active: #4338CA;       // 主色激活
$primary-light: #EEF2FF;        // 主色浅色背景

// 功能色
$success-color: #10B981;        // 成功 - 绿色
$warning-color: #F59E0B;        // 警告 - 橙色
$error-color: #EF4444;          // 错误 - 红色
$info-color: #3B82F6;           // 信息 - 蓝色

// 中性色
$text-primary: #1F2937;         // 主要文字
$text-secondary: #6B7280;       // 次要文字
$text-disabled: #9CA3AF;        // 禁用文字
$border-color: #E5E7EB;         // 边框
$bg-primary: #FFFFFF;           // 主背景
$bg-secondary: #F9FAFB;         // 次级背景
$bg-tertiary: #F3F4F6;          // 第三级背景

// 任务状态色
$status-pending: #9CA3AF;       // 待执行 - 灰色
$status-running: #3B82F6;       // 执行中 - 蓝色
$status-completed: #10B981;     // 已完成 - 绿色
$status-failed: #EF4444;        // 失败 - 红色
$status-reviewing: #F59E0B;     // 审核中 - 橙色

// 质量评分色
$quality-excellent: #10B981;    // 优秀 4.5-5.0
$quality-good: #3B82F6;         // 良好 3.5-4.5
$quality-fair: #F59E0B;         // 一般 2.5-3.5
$quality-poor: #EF4444;         // 较差 < 2.5
```

### 1.2 字体规范

```scss
// 字体家族
$font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
                   'Helvetica Neue', Arial, 'Noto Sans SC', sans-serif;
$font-family-code: 'SF Mono', 'Fira Code', Consolas, monospace;

// 字号
$font-size-xs: 12px;            // 辅助文字
$font-size-sm: 13px;            // 次要文字
$font-size-base: 14px;          // 正文
$font-size-md: 16px;            // 小标题
$font-size-lg: 18px;            // 标题
$font-size-xl: 20px;            // 页面标题
$font-size-2xl: 24px;           // 大标题
$font-size-3xl: 30px;           // 超大标题

// 行高
$line-height-tight: 1.25;
$line-height-base: 1.5;
$line-height-relaxed: 1.75;

// 字重
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;
```

### 1.3 间距规范

```scss
// 基础间距 (4px 倍数)
$spacing-0: 0;
$spacing-1: 4px;
$spacing-2: 8px;
$spacing-3: 12px;
$spacing-4: 16px;
$spacing-5: 20px;
$spacing-6: 24px;
$spacing-8: 32px;
$spacing-10: 40px;
$spacing-12: 48px;
$spacing-16: 64px;

// 页面间距
$page-padding: 24px;
$section-gap: 24px;
$card-padding: 16px;
```

### 1.4 圆角规范

```scss
$radius-none: 0;
$radius-sm: 4px;
$radius-base: 6px;
$radius-md: 8px;
$radius-lg: 12px;
$radius-xl: 16px;
$radius-full: 9999px;
```

### 1.5 阴影规范

```scss
$shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
$shadow-base: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
$shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
$shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
$shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.04);
```

---

## 2. 页面布局设计

### 2.1 整体布局结构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              顶部导航栏 (64px)                               │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │ Logo    项目名称         [会话列表] [新建] [设置]           用户头像    ││
│  └─────────────────────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌──────────┐  ┌─────────────────────────────────┐  ┌───────────────────┐  │
│  │          │  │                                  │  │                   │  │
│  │  左侧栏   │  │           主内容区               │  │      右侧栏       │  │
│  │  (280px) │  │          (自适应)                │  │     (360px)       │  │
│  │          │  │                                  │  │                   │  │
│  │  任务列表 │  │         预览 / 内容              │  │    聊天 / 属性    │  │
│  │  流程图   │  │                                  │  │                   │  │
│  │          │  │                                  │  │                   │  │
│  └──────────┘  └─────────────────────────────────┘  └───────────────────┘  │
│                                                                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                              底部状态栏 (可选)                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 响应式断点

```scss
// 断点定义
$breakpoint-sm: 640px;          // 手机横屏
$breakpoint-md: 768px;          // 平板竖屏
$breakpoint-lg: 1024px;         // 平板横屏 / 小笔记本
$breakpoint-xl: 1280px;         // 标准笔记本
$breakpoint-2xl: 1536px;        // 大屏幕

// 响应式布局
// < 768px:  单栏布局，底部导航
// 768-1024: 双栏布局，隐藏右侧栏
// > 1024px: 三栏布局，完整显示
```

---

## 3. 核心页面设计

### 3.1 首页（会话列表）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  Creative AutoGPT                                         [+ 新建会话]     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   🔍 搜索会话...                       [全部 ▼] [最近 ▼] [排序 ▼]          │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  📖 玄幻修仙：废材逆袭                                              │  │
│   │  ──────────────────────────────────────────────────────────────────  │  │
│   │  状态: 🟢 进行中   |   进度: ████████░░ 75%   |   10万/15万字        │  │
│   │  最后编辑: 10分钟前                                                  │  │
│   │                                                   [继续] [查看] [...] │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  📖 都市重生：商业帝国                                              │  │
│   │  ──────────────────────────────────────────────────────────────────  │  │
│   │  状态: 🟡 已暂停   |   进度: ████░░░░░░ 40%   |   8万/20万字         │  │
│   │  最后编辑: 2天前                                                     │  │
│   │                                                   [继续] [查看] [...] │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  📖 科幻末世：生存之路                                              │  │
│   │  ──────────────────────────────────────────────────────────────────  │  │
│   │  状态: ✅ 已完成   |   进度: ██████████ 100%  |   30万字             │  │
│   │  完成时间: 1周前                                                     │  │
│   │                                                   [导出] [查看] [...] │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 新建会话页（智能创建）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  ← 返回                         新建创作项目                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                                                                      │  │
│   │   ✨ 告诉我你想写什么小说                                           │  │
│   │                                                                      │  │
│   │   ┌─────────────────────────────────────────────────────────────┐   │  │
│   │   │                                                              │   │  │
│   │   │  写一个玄幻小说，主角是废材逆袭成仙帝，100万字               │   │  │
│   │   │                                                              │   │  │
│   │   │                                                              │   │  │
│   │   └─────────────────────────────────────────────────────────────┘   │  │
│   │                                                                      │  │
│   │   💡 用简单的话描述即可，AI会自动扩展为专业配置                     │  │
│   │                                                                      │  │
│   │   示例：                                                             │  │
│   │   • "都市重生，主角带着记忆回到高中"                                │  │
│   │   • "仙侠+无限流，主角穿越各个武侠世界"                             │  │
│   │   • "甜宠文，霸道总裁爱上小助理，50万字"                           │  │
│   │                                                                      │  │
│   │                                          [🚀 智能生成配置]           │  │
│   │                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                                              │
│   ⚙️ 或者使用高级模式手动配置                              [展开高级配置]  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 智能配置预览（扩展结果）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  ← 返回                      ✨ 为您生成的配置                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   📝 原始描述: "写一个玄幻小说，主角是废材逆袭成仙帝，100万字"             │
│                                                                              │
│   置信度: ████████░░ 85%  （高置信度，可直接开始）                         │
│                                                                              │
│   ┌──────────────────────────────────────────────────────────────────────┐ │
│   │                                                                       │ │
│   │  🎨 基本信息                                              [编辑 ✏️]  │ │
│   │  ├─ 风格: 玄幻修仙                                                   │ │
│   │  ├─ 主题: 废材少年逆袭成为仙帝的热血成长故事                        │ │
│   │  ├─ 字数: 1,000,000 字                                              │ │
│   │  └─ 章节: 500 章 (约2000字/章)                                      │ │
│   │                                                                       │ │
│   ├──────────────────────────────────────────────────────────────────────┤ │
│   │                                                                       │ │
│   │  👤 主角设定                                              [编辑 ✏️]  │ │
│   │  ├─ 性别: 男                                                         │ │
│   │  ├─ 年龄: 16-18岁                                                    │ │
│   │  ├─ 性格: 坚韧不拔、心思缜密、重情重义                               │ │
│   │  ├─ 背景: 曾被视为废材的宗门弟子，意外获得机缘                      │ │
│   │  └─ 成长弧线: 从被人嘲笑的废材到一步步证道成仙帝                    │ │
│   │                                                                       │ │
│   ├──────────────────────────────────────────────────────────────────────┤ │
│   │                                                                       │ │
│   │  🌍 世界观                                                [编辑 ✏️]  │ │
│   │  ├─ 类型: 仙侠世界                                                   │ │
│   │  ├─ 力量体系: 炼气→筑基→金丹→元婴→化神→渡劫→大乘→仙帝            │ │
│   │  └─ 主要势力: 正道宗门、魔道势力、上古遗族                          │ │
│   │                                                                       │ │
│   └──────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│   ┌──────────────────────────────────────────────────────────────────────┐ │
│   │  💬 有什么需要调整的吗？                                             │ │
│   │  ┌────────────────────────────────────────────────────────────────┐  │ │
│   │  │ 主角改成女的，增加更多感情线                                    │  │ │
│   │  └────────────────────────────────────────────────────────────────┘  │ │
│   │                                                            [发送 ↵]  │ │
│   └──────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│                              [🔄 重新生成]    [✅ 确认，开始创作]           │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.4 主工作区（核心页面）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  📖 玄幻修仙：废材逆袭     进度: ████████░░ 75%     [⏸️暂停] [⚙️设置]      │
├──────────────┬──────────────────────────────────────┬───────────────────────┤
│              │                                      │                       │
│  📋 任务列表  │            📄 内容预览               │     💬 AI 助手        │
│              │                                      │                       │
│ ┌──────────┐ │  ┌────────────────────────────────┐ │  ┌─────────────────┐  │
│ │✅ 大纲生成│ │  │                                │ │  │ 🤖 请查看当前   │  │
│ │  已确认   │ │  │  📖 第三章：宗门试炼           │ │  │    生成的内容， │  │
│ └──────────┘ │  │  ───────────────────────────   │ │  │    有什么需要   │  │
│              │  │                                │ │  │    调整的吗？   │  │
│ ┌──────────┐ │  │  林轩站在试炼场中央，周围是    │ │  │                 │  │
│ │✅ 人物设计│ │  │  无数嘲讽的目光。              │ │  │ 👤 主角的反应   │  │
│ │  已确认   │ │  │                                │ │  │    太软弱了，   │  │
│ └──────────┘ │  │  "废物也敢来参加试炼？"        │ │  │    我想要他更   │  │
│              │  │                                │ │  │    霸气一点     │  │
│ ┌──────────┐ │  │  一个穿着华贵的弟子冷笑道。    │ │  │                 │  │
│ │✅ 事件规划│ │  │                                │ │  │ 🤖 收到！我会   │  │
│ │  已确认   │ │  │  林轩没有理会，只是冷冷一笑。 │ │  │    调整主角的   │  │
│ └──────────┘ │  │  他知道，这些人很快就会知道    │ │  │    性格表现。   │  │
│              │  │  什么叫做真正的废材...          │ │  │                 │  │
│ ┌──────────┐ │  │                                │ │  │    这个修改:    │  │
│ │🔄 第三章 │ │  │  【摘要】林轩参加宗门试炼，   │ │  │ ○ 只影响本章    │  │
│ │  预览中◀─│ │  │  面对嘲讽冷笑以对，展现出     │ │  │ ○ 影响后续章节  │  │
│ └──────────┘ │  │  隐藏的实力。                  │ │  │ ○ 修改全局设定  │  │
│              │  │                                │ │  │                 │  │
│ ┌──────────┐ │  │  【关键点】                    │ │  │         [确认]  │  │
│ │⏳ 第四章 │ │  │  • 试炼场受辱                  │ │  ├─────────────────┤  │
│ │  等待中   │ │  │  • 冷笑回应                    │ │  │                 │  │
│ └──────────┘ │  │  • 暗藏实力                    │ │  │ ┌─────────────┐ │  │
│              │  │                                │ │  │ │ 输入反馈... │ │  │
│ ┌──────────┐ │  │  质量评分: ⭐⭐⭐⭐ 4.2/5      │ │  │ └─────────────┘ │  │
│ │⏳ 第五章 │ │  │                                │ │  │          [发送] │  │
│ │  等待中   │ │  └────────────────────────────────┘ │  └─────────────────┘  │
│ └──────────┘ │                                      │                       │
│              │  ┌────────────────────────────────┐ │  ┌─────────────────┐  │
│  ▼ 更多任务  │  │                                │ │  │ 📊 快捷反馈     │  │
│              │  │  [✅ 确认通过]  [🔄 重新生成]  │ │  │                 │  │
│              │  │                                │ │  │ [📝 更详细]     │  │
│              │  │  [⏭️ 跳过]     [⏸️ 暂停执行]   │ │  │ [✨ 更有创意]   │  │
│              │  │                                │ │  │ [✂️ 精简一些]   │  │
│              │  └────────────────────────────────┘ │  │ [🎨 换种风格]   │  │
│              │                                      │  └─────────────────┘  │
├──────────────┴──────────────────────────────────────┴───────────────────────┤
│  📊 统计: 已完成 15/20 任务  |  字数: 75,000  |  费用: ¥2.35  |  用时: 45分钟 │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.5 章节阅读页

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  ← 返回工作区              📖 玄幻修仙：废材逆袭               [导出 ▼]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────┐  ┌────────────────────────────────────────────────────────┐│
│  │            │  │                                                         ││
│  │  目录       │  │  第三章：宗门试炼                                      ││
│  │            │  │  ═══════════════════════════════════════════════════   ││
│  │ ▼ 第一卷    │  │                                                         ││
│  │   第1章 ✓  │  │  林轩站在试炼场中央，周围是无数嘲讽的目光。            ││
│  │   第2章 ✓  │  │                                                         ││
│  │   第3章 ◀─ │  │  "废物也敢来参加试炼？"                                ││
│  │   第4章    │  │                                                         ││
│  │   第5章    │  │  一个穿着华贵的弟子冷笑道。他叫王天明，是宗门长老的    ││
│  │            │  │  嫡传弟子，一向看不起林轩这种"废材"。                  ││
│  │ ▷ 第二卷    │  │                                                         ││
│  │            │  │  林轩没有理会，只是冷冷一笑。                            ││
│  │ ▷ 第三卷    │  │                                                         ││
│  │            │  │  "笑什么？"王天明皱眉。                                ││
│  │            │  │                                                         ││
│  │            │  │  "笑你无知。"                                          ││
│  │            │  │                                                         ││
│  │            │  │  林轩淡淡开口，声音不大，却让周围的嘲笑声戛然而止。    ││
│  │            │  │                                                         ││
│  │            │  │  他缓缓抬起手，一道金色的灵力从指尖涌出...             ││
│  │            │  │                                                         ││
│  │            │  │  ───────────────────────────────────────────────────   ││
│  │            │  │                                                         ││
│  │            │  │  字数: 2,156  |  版本: v2 (润色后)  |  [查看历史版本]  ││
│  │            │  │                                                         ││
│  └────────────┘  │              [◀ 上一章]    [下一章 ▶]                   ││
│                   └────────────────────────────────────────────────────────┘│
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. 核心组件设计

### 4.1 TaskCard（任务卡片）

```tsx
interface TaskCardProps {
  taskId: string;
  taskType: 'outline' | 'character' | 'event' | 'chapter' | string;
  taskName: string;
  status: 'pending' | 'running' | 'completed' | 'failed' | 'reviewing';
  progress?: number;          // 0-100
  isActive?: boolean;         // 当前选中
  onClick?: () => void;
}

// 视觉设计
┌──────────────────────────────┐
│  [图标] 任务名称              │
│  ─────────────────────────   │
│  状态: 🟢 已完成              │
│  ░░░░░░░░░░ 100%             │  // 进度条
└──────────────────────────────┘

// 状态颜色
pending:   灰色边框 + 灰色图标
running:   蓝色边框 + 蓝色脉冲动画
completed: 绿色边框 + 绿色勾选图标
failed:    红色边框 + 红色感叹号
reviewing: 橙色边框 + 橙色闪烁
```

### 4.2 PreviewPanel（预览面板）

```tsx
interface PreviewPanelProps {
  taskId: string;
  content: string;
  summary: string;
  keyPoints: string[];
  quality: {
    score: number;
    maxScore: number;
    passed: boolean;
  };
  status: 'pending_review' | 'approved' | 'needs_revision';
  onApprove: () => void;
  onRegenerate: () => void;
  onFeedback: (feedback: string) => void;
}

// 视觉设计
┌─────────────────────────────────────────┐
│  📄 内容预览                            │
│  ─────────────────────────────────────  │
│                                          │
│  [实际内容，支持 Markdown 渲染]          │
│                                          │
│  ─────────────────────────────────────  │
│  【摘要】...                             │
│  【关键点】                              │
│  • 要点1                                │
│  • 要点2                                │
│                                          │
│  质量: ⭐⭐⭐⭐ 4.2/5                    │
│  ─────────────────────────────────────  │
│  [✅ 确认]  [🔄 重新生成]  [⏭️ 跳过]    │
└─────────────────────────────────────────┘
```

### 4.3 ChatPanel（聊天面板）

```tsx
interface ChatPanelProps {
  taskId: string;
  messages: ChatMessage[];
  quickFeedbacks: QuickFeedback[];
  onSendMessage: (message: string) => void;
  onQuickFeedback: (feedbackId: string) => void;
  onScopeSelect?: (scope: 'current' | 'future' | 'global') => void;
}

interface ChatMessage {
  role: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: string;
  scopeQuestion?: ScopeQuestion;  // 如果需要选择作用域
}

// 视觉设计
┌─────────────────────────────────────────┐
│  💬 AI 助手                             │
│  ─────────────────────────────────────  │
│                                          │
│  ┌─────────────────────────────────┐   │
│  │ 🤖 请查看当前生成的内容，       │   │  // AI消息，左对齐，浅灰背景
│  │    有什么需要调整的吗？         │   │
│  └─────────────────────────────────┘   │
│                                          │
│       ┌─────────────────────────────┐   │
│       │ 主角的反应太软弱了，       │   │  // 用户消息，右对齐，主色背景
│       │ 我想要他更霸气一点         │   │
│       └─────────────────────────────┘   │
│                                          │
│  ┌─────────────────────────────────┐   │
│  │ 🤖 收到！我会调整主角性格。    │   │
│  │                                  │   │
│  │    这个修改应该影响：           │   │
│  │    ○ 只影响本章                 │   │  // 作用域选择
│  │    ○ 影响后续章节               │   │
│  │    ○ 修改全局设定               │   │
│  │                                  │   │
│  │                        [确认]   │   │
│  └─────────────────────────────────┘   │
│                                          │
│  ─────────────────────────────────────  │
│  📊 快捷反馈                            │
│  [📝 更详细] [✨ 更有创意] [✂️ 精简]   │
│  ─────────────────────────────────────  │
│  ┌─────────────────────────────────┐   │
│  │ 输入反馈或建议...               │   │
│  └─────────────────────────────────┘   │
│                               [发送 ↵]  │
└─────────────────────────────────────────┘
```

### 4.4 QualityBadge（质量徽章）

```tsx
interface QualityBadgeProps {
  score: number;        // 0-5
  maxScore?: number;    // 默认5
  size?: 'sm' | 'md' | 'lg';
  showStars?: boolean;  // 显示星星还是数字
}

// 视觉设计
// 星星模式: ⭐⭐⭐⭐☆ 4.2
// 数字模式: 4.2/5

// 颜色规则
score >= 4.5: 绿色 (优秀)
score >= 3.5: 蓝色 (良好)
score >= 2.5: 橙色 (一般)
score < 2.5:  红色 (较差)
```

### 4.5 ScopeSelector（作用域选择器）

```tsx
interface ScopeSelectorProps {
  onSelect: (scope: 'current_task' | 'future' | 'global') => void;
  defaultScope?: string;
  globalWarning?: string;
}

// 视觉设计
┌─────────────────────────────────────────┐
│  🎯 这个修改应该影响哪些内容？          │
│                                          │
│  ○ 只影响当前任务                       │  // 默认选中
│    └ 只修改当前正在预览的内容           │
│                                          │
│  ○ 影响当前和后续任务                   │
│    └ 当前任务和之后的章节都会应用       │
│                                          │
│  ○ 修改全局设定                         │
│    └ 更新基础人设，影响整个项目         │
│    ⚠️ 可能导致已完成内容与新设定不一致  │  // 警告提示
│                                          │
│                        [取消]  [确认]    │
└─────────────────────────────────────────┘
```

---

## 5. 交互状态设计

### 5.1 任务执行状态机

```
                    ┌─────────────┐
                    │   pending   │
                    │   (待执行)   │
                    └──────┬──────┘
                           │ 开始执行
                           ▼
                    ┌─────────────┐
          ┌────────│   running   │────────┐
          │        │   (执行中)   │        │
          │        └──────┬──────┘        │
          │               │               │
          │ 执行失败      │ 执行完成      │ 用户暂停
          ▼               ▼               ▼
   ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
   │   failed    │ │  reviewing  │ │   paused    │
   │   (失败)    │ │  (预览中)   │ │   (已暂停)  │
   └──────┬──────┘ └──────┬──────┘ └──────┬──────┘
          │               │               │
          │ 重试          │               │ 继续
          └───────────────┼───────────────┘
                          │
            ┌─────────────┼─────────────┐
            │             │             │
            ▼             ▼             ▼
     ┌───────────┐ ┌───────────┐ ┌───────────┐
     │ 用户确认  │ │ 用户反馈  │ │  重新生成  │
     │           │ │ + 选作用域│ │           │
     └─────┬─────┘ └─────┬─────┘ └─────┬─────┘
           │             │             │
           │             └──────┬──────┘
           │                    │
           ▼                    ▼
    ┌─────────────┐      ┌─────────────┐
    │  completed  │      │  revising   │
    │   (已完成)  │      │  (修订中)   │
    └─────────────┘      └──────┬──────┘
                                │
                                └──▶ reviewing
```

### 5.2 聊天反馈交互流程

```
用户发送反馈
      │
      ▼
┌─────────────────┐
│ 显示"正在分析..."│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 显示转换结果    │
│ + 关键变化点    │
└────────┬────────┘
         │
    需要选择作用域？
    ┌────┴────┐
    │ 是      │ 否 (置信度高)
    ▼         ▼
┌───────┐  ┌───────────────┐
│显示选择│  │ 自动使用      │
│作用域  │  │ current_task  │
└───┬───┘  └───────┬───────┘
    │              │
    └──────┬───────┘
           │
           ▼
    ┌─────────────────┐
    │ 开始重新生成    │
    │ 显示"生成中..." │
    └────────┬────────┘
             │
             ▼
    ┌─────────────────┐
    │ 显示新预览      │
    │ 标记"已应用反馈"│
    └─────────────────┘
```

---

## 6. 移动端适配

### 6.1 移动端布局

```
手机竖屏 (< 768px):

┌─────────────────────┐
│  顶部导航            │
├─────────────────────┤
│                      │
│    主内容区          │
│    (预览/聊天)       │
│                      │
│                      │
│                      │
├─────────────────────┤
│  [任务] [聊天] [更多]│  // 底部Tab导航
└─────────────────────┘

// Tab 切换:
// - 任务: 显示任务列表
// - 聊天: 显示聊天面板
// - 更多: 设置、导出等
```

### 6.2 触摸交互

- 左滑任务卡片: 显示快捷操作（重试/跳过/删除）
- 下拉刷新: 更新任务状态
- 长按预览: 复制内容
- 双指缩放: 调整文字大小

---

## 7. 动画与过渡

### 7.1 状态切换动画

```scss
// 任务状态切换
.task-card {
  transition: all 0.3s ease;
  
  &.running {
    animation: pulse 2s infinite;
  }
  
  &.completed {
    animation: checkmark 0.5s ease;
  }
}

// 预览面板展开
.preview-panel {
  animation: slideIn 0.3s ease;
}

// 消息出现
.chat-message {
  animation: fadeInUp 0.3s ease;
}
```

### 7.2 加载状态

```
// 内容生成中
┌─────────────────────────────────────────┐
│                                          │
│        ⏳ AI 正在创作中...               │
│                                          │
│        ████████░░░░░░░░░░ 45%           │
│                                          │
│        预计剩余: 30秒                    │
│                                          │
└─────────────────────────────────────────┘

// 骨架屏
┌─────────────────────────────────────────┐
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓                        │
│  ───────────────────────────────────── │
│  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │
│  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │
│  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░     │
└─────────────────────────────────────────┘
```

---

## 8. 错误处理UI

### 8.1 错误提示

```
// Toast 提示 (轻量)
┌─────────────────────────────────────────┐
│  ❌ 生成失败，请重试                    │
└─────────────────────────────────────────┘

// 内联错误 (任务卡片)
┌──────────────────────────────┐
│  ❌ 第三章生成失败            │
│  ─────────────────────────   │
│  原因: API 超时               │
│                              │
│  [🔄 重试]  [⏭️ 跳过]        │
└──────────────────────────────┘

// 全屏错误 (严重)
┌─────────────────────────────────────────┐
│                                          │
│           😵 出错了                      │
│                                          │
│    连接已断开，请检查网络后重试          │
│                                          │
│              [🔄 重新连接]               │
│                                          │
└─────────────────────────────────────────┘
```

---

*版本: 1.0*  
*最后更新: 2026-01-23*
